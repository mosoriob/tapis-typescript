# `tapis-typescript`

This project creates autogenerated TypeScript types and fetch bindings for TAPIS v3 from its OpenAPI specifications.

## Directory Structure

### [`tapis-typescript`](./tapis-typescript)

The `@tapis/tapis-typescript` roll up package.

### [`example`](./example)

An example project that uses `@tapis/tapis-typescript` from npm.

### [`tapis-openapi`](./tapis-openapi)

OpenAPI yml files from [https://tapis-project.github.io/live-docs/](https://tapis-project.github.io/live-docs/)

### [`gen`](./gen)

Output directory of `tapis-typescript` npm package

### [`transforms`](./transforms)

Transformation scripts

- [`utils.js`](./transforms/utils.js): Utility functions for working with yml files

### [`transformed_openapi`](./transformed_openapi)

Transformation script output files

### [`./generate.sh`](./generate.sh)

Generation script that accepts the name of the service as a parameter and runs the entire workflow. All files must match the service name. For example, running `./generate.sh systems` will:

- Run [`transforms/systems.js`](./transforms/systems.js), which should read [`tapis_openapi/systems.yml`](./tapis_openapi/systems.yml) and output the transformed results to [`transformed_openapi/systems.yml`](./transformed_openapi/systems.yml)
- Run the `openapi-generator-cli` and pass it [`configs/systems.json`](./configs/systems.json)with an output directory of [`gen/systems`](./gen/systems)

## Building and Testing

The `@tapis/typescript` top level package locally references all of the services in the `./gen` folder. These services must be built, and then the top level package can be built. To do so, do the following:

- `npm run build-services`
- `npm install`
- `npm run build`

Then you can run `npm run test`